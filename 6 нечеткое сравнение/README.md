# Реализация нечеткого сравнения

- Файлы с форматом .ipynb в соответствующих папках (основная папка - "шины") имеют описание и реализацию нечеткого сравнения
- *Дополнительно*: WeighedFuzzyNickAlt.py (содержит большой реализованный мною класс нечеткого сравнения)

## Описание основной папки "шины"

Данный кейс решает задачу нечеткого сравнения названий шин между выгрузками из разных программ для подтягивания кодов из 1C. Использует fuzzy matching, косинусное сходство на n-граммах и комбинированные метрики.
<br>
Данные: 'Gr_Krasn.csv' (2386 названий), '1C выгрузка шин.xlsx' (~9000 записей с кодами, брендами, моделями).

## Основные шаги

- Импорт библиотек (pandas, numpy, re, rapidfuzz, sentence_transformers, transliterate, sklearn)  
- Загрузка и предобработка данных (удаление лишних символов, нижний регистр) 
- Сравнение различных методов нечеткого сравнения
- Добавление нового реализованного мною алгоритма:
    1) Удаляем из текста все, кроме букв и цифр (даже пробелы удаляются).
    2) Создаем n-граммы (последовательности из n символов).
    3) Одна функция будет создавать последовательности из 1, 2, 3 символов. Вторая - из 1, 2, 3, 4 символов.
    4) Затем подсчитываем количество вхождений каждой n-граммы для каждой строки.
    5) Применяем косинусное сходство.
    6) Выделяем по 2 наилучших сходства.
- Взвешенное сходство метода token_set_ratio и нового алгоритма
    

## Результаты

#### Был создан алгоритм взвешенного нечеткого сопоставления, которые использует методы token_set_ratio (рассчет расстояния Левенштейна между двумя множествами токенов, при игнорировании порядка слов и дубликатов) и косинусное сходство различных n-грамм

#### Данный алгоритм показал высокий результат, который находится на одном уровне с длительным (сопровожденным неточностями) ручным сопоставлением или даже лучше него.

#### Еще один важный плюс моего алгоритма - скорость работы. Я использовал матричное скалярное произведение csr-матриц для рассчета косинусного сходства, а матричное скалярное произведение очень хорошо оптимизировано в numpy и выполняется очень быстро. Основная же масса известных методов нечеткого сравнения занимает относительно много времени при работе с большими массивами данных.

## Автор

Алтухов Николай
  
2026